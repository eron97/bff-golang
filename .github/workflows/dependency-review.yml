name: "Dependency Review"

on:
  workflow_run:
    workflows: ["Build & Deploy DEV"]
    types:
      - completed
  pull_request:
    branches:
      - develop

jobs:
  dependency_review:
    runs-on: ubuntu-latest
    if: startsWith(github.head_ref, 'feature/') || github.event_name == 'pull_request'

    steps:
    - name: Check out code
      uses: actions/checkout@v4

    - name: 'Dependency Review'
      uses: actions/dependency-review-action@v4
      with:
        comment-summary-in-pr: always
        repo-token: ${{ secrets.GITHUB_TOKEN }}